{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://axme.dev/schemas/public_api/api.inbox.changes.response.v1.json",
  "title": "ApiInboxChangesResponseV1",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "ok",
    "changes",
    "next_cursor",
    "has_more"
  ],
  "properties": {
    "ok": {
      "type": "boolean",
      "const": true
    },
    "changes": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "cursor",
          "thread"
        ],
        "properties": {
          "cursor": {
            "type": "string",
            "minLength": 3,
            "maxLength": 128
          },
          "thread": {
            "type": "object",
            "additionalProperties": true,
            "required": [
              "thread_id",
              "intent_id",
              "status",
              "owner_agent",
              "from_agent",
              "to_agent",
              "created_at",
              "updated_at",
              "timeline"
            ],
            "properties": {
              "thread_id": {
                "type": "string",
                "format": "uuid"
              },
              "intent_id": {
                "type": "string",
                "format": "uuid"
              },
              "status": {
                "type": "string",
                "enum": [
                  "pending",
                  "active",
                  "done"
                ]
              },
              "owner_agent": {
                "type": "string",
                "minLength": 3,
                "maxLength": 255
              },
              "from_agent": {
                "type": "string",
                "minLength": 3,
                "maxLength": 255
              },
              "to_agent": {
                "type": "string",
                "minLength": 3,
                "maxLength": 255
              },
              "created_at": {
                "type": "string",
                "format": "date-time"
              },
              "updated_at": {
                "type": "string",
                "format": "date-time"
              },
              "timeline": {
                "type": "array",
                "minItems": 1,
                "items": {
                  "type": "object",
                  "additionalProperties": true,
                  "required": [
                    "event_id",
                    "event_type",
                    "actor",
                    "at",
                    "details"
                  ],
                  "properties": {
                    "event_id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "event_type": {
                      "type": "string",
                      "minLength": 3,
                      "maxLength": 120
                    },
                    "actor": {
                      "type": "string",
                      "minLength": 2,
                      "maxLength": 120
                    },
                    "at": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "details": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "next_cursor": {
      "type": [
        "string",
        "null"
      ]
    },
    "has_more": {
      "type": "boolean"
    }
  }
}
